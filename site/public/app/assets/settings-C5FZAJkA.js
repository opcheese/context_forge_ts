import{j as e,r as t}from"./index-C_UHGseK.js";import{B as j}from"./button-nz7UIBa1.js";import{D as b}from"./debounced-button-_VXZ6Nw6.js";import{I as p}from"./input-PGr6TGjs.js";import{L as u}from"./label-CBvW9QHo.js";import{o as x,e as h,f,d as N,b as k}from"./openrouter-CvI0C0jo.js";function y(){const r=x.getApiKey();return r?"sk-****"+r.slice(-4):""}function C(){const[r,c]=t.useState(y),[o,i]=t.useState(()=>x.getModel()),[m,d]=t.useState(!1),[s,l]=t.useState({checking:!1,ok:!1}),v=()=>{r&&!r.startsWith("sk-****")&&x.setApiKey(r),x.setModel(o),d(!0),setTimeout(()=>d(!1),2e3)},g=async()=>{l({checking:!0,ok:!1});const n=await N();l({checking:!1,ok:n.ok,error:n.error,model:n.model})},a=()=>{x.clearApiKey(),c(""),l({checking:!1,ok:!1})};return e.jsxs("div",{className:"rounded-lg border border-border p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"OpenRouter"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Access Claude, GPT-4, Llama, and 100+ models via unified API"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.ok&&e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Connected"}),s.error&&e.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:s.error})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"openrouter-key",children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{id:"openrouter-key",type:"password",placeholder:"sk-or-v1-...",value:r,onChange:n=>c(n.target.value),className:"flex-1"}),e.jsx(j,{variant:"outline",size:"sm",onClick:a,children:"Clear"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your API key from"," ",e.jsx("a",{href:"https://openrouter.ai/keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"openrouter.ai/keys"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"openrouter-model",children:"Model"}),e.jsx(p,{id:"openrouter-model",placeholder:"anthropic/claude-sonnet-4",value:o,onChange:n=>i(n.target.value)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["See"," ",e.jsx("a",{href:"https://openrouter.ai/models",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"available models"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx(b,{onClick:v,disabled:!r,debounceMs:500,children:m?"Saved!":"Save"}),e.jsx(j,{variant:"outline",onClick:g,disabled:s.checking,children:s.checking?"Testing...":"Test Connection"})]})]})}function S(){const[r,c]=t.useState(()=>h.getUrl()),[o,i]=t.useState(()=>h.getModel()),[m,d]=t.useState(!1),[s,l]=t.useState({checking:!1,ok:!1}),v=()=>{h.setUrl(r),h.setModel(o),d(!0),setTimeout(()=>d(!1),2e3)},g=async()=>{l({checking:!0,ok:!1});const a=await k();l({checking:!1,ok:a.ok,error:a.error,model:a.model})};return e.jsxs("div",{className:"rounded-lg border border-border p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Ollama"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Run LLMs locally on your machine or network"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.ok&&e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Connected"}),s.error&&e.jsx("span",{className:"text-sm text-red-600 dark:text-red-400 max-w-xs truncate",children:s.error})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"ollama-url",children:"Server URL"}),e.jsx(p,{id:"ollama-url",placeholder:"http://localhost:11434",value:r,onChange:a=>c(a.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Default: http://localhost:11434. For network access, use your machine's IP address."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"ollama-model",children:"Model"}),e.jsx(p,{id:"ollama-model",placeholder:"llama3.2:latest",value:o,onChange:a=>i(a.target.value)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Run ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"ollama list"})," to see available models"]})]}),e.jsxs("div",{className:"rounded-md bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 p-3",children:[e.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[e.jsx("strong",{children:"CORS Required:"})," To access Ollama from a browser, start it with:"]}),e.jsx("code",{className:"block mt-1 text-xs bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded",children:'OLLAMA_ORIGINS="*" ollama serve'})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx(b,{onClick:v,debounceMs:500,children:m?"Saved!":"Save"}),e.jsx(j,{variant:"outline",onClick:g,disabled:s.checking,children:s.checking?"Testing...":"Test Connection"})]})]})}function L(){return e.jsxs("div",{className:"rounded-lg border border-border p-6 space-y-4 opacity-60",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Claude Code"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use Claude via local Claude Code CLI"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Backend Only"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Claude Code runs on the backend and requires the Claude CLI to be installed. No configuration needed here."})]})}function P(){const[r,c]=t.useState(()=>f.getProvider()),[o,i]=t.useState(!1),m=s=>{c(s),f.setProvider(s),i(!0),setTimeout(()=>i(!1),2e3)},d=[{value:"claude-code",label:"Claude Code (Recommended)",description:"Uses Claude Code CLI on the backend (fastest, most reliable)"},{value:"openrouter",label:"OpenRouter",description:"Uses OpenRouter API (requires API key configuration above)"},{value:"ollama",label:"Ollama",description:"Uses local Ollama server (requires Ollama setup above)"}];return e.jsxs("div",{className:"rounded-lg border border-border p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Compression Provider"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose which LLM provider to use for block compression"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(u,{children:"Provider"}),d.map(s=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"radio",id:`provider-${s.value}`,name:"compression-provider",value:s.value,checked:r===s.value,onChange:l=>m(l.target.value),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`provider-${s.value}`,className:"text-sm font-medium cursor-pointer",children:s.label}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:s.description})]})]},s.value))]}),o&&e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Compression provider saved!"})]})}function T(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure your LLM providers"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"LLM Providers"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"API keys and settings are stored locally in your browser. They are never sent to our servers."}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(C,{}),e.jsx(S,{}),e.jsx(L,{})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Compression Settings"}),e.jsx(P,{})]})]})}export{T as component};
