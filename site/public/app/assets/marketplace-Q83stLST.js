import{c as f,r as a,b as x,j as e,d as g,k as b,G as h}from"./index-C_UHGseK.js";import{a as i}from"./api-B6BZvDqw.js";import{B as k}from"./button-nz7UIBa1.js";import{I as j}from"./input-PGr6TGjs.js";import{D as y}from"./download-C4hFabQ9.js";const N=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],w=f("search",N);function _(){const[t,u]=a.useState(""),[m,n]=a.useState(""),[o,l]=a.useState(),[d,p]=a.useState(),c=x(i.marketplace.listCategories),s=x(i.marketplace.search,{searchTerm:m||void 0,category:o,type:d});return a.useEffect(()=>{const r=setTimeout(()=>n(t),300);return()=>clearTimeout(r)},[t]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Marketplace"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Browse and import community templates and workflows"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(j,{placeholder:"Search templates and workflows...",value:t,onChange:r=>u(r.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>l(void 0),className:`text-xs px-3 py-1.5 rounded-full border transition-colors ${o?"bg-background text-muted-foreground border-border hover:border-foreground/30":"bg-foreground text-background border-foreground"}`,children:"All"}),c?.map(r=>e.jsx("button",{onClick:()=>l(o===r.slug?void 0:r.slug),className:`text-xs px-3 py-1.5 rounded-full border transition-colors ${o===r.slug?"bg-foreground text-background border-foreground":"bg-background text-muted-foreground border-border hover:border-foreground/30"}`,children:r.label},r._id))]}),e.jsx("div",{className:"flex gap-2",children:[void 0,"template","workflow"].map(r=>e.jsx("button",{onClick:()=>p(r),className:`text-xs px-3 py-1.5 rounded-full border transition-colors ${d===r?"bg-foreground text-background border-foreground":"bg-background text-muted-foreground border-border hover:border-foreground/30"}`,children:r==="template"?"Templates":r==="workflow"?"Workflows":"All Types"},r??"all"))}),s===void 0?e.jsx("p",{className:"text-muted-foreground text-sm py-8 text-center",children:"Loading..."}):s.length===0?e.jsx("p",{className:"text-muted-foreground text-sm py-8 text-center",children:t?"No results found":"No items published yet"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(r=>e.jsx(v,{item:r},r._id))})]})}function v({item:t}){const u=g(i.marketplace.importTemplate),m=g(i.marketplace.importWorkflow),n=b(),{toast:o}=h(),[l,d]=a.useState(!1),p=async()=>{d(!0);try{t.type==="template"?(await u({id:t._id}),o.success("Imported",`Template "${t.name}" added to your library`),n({to:"/app/templates"})):(await m({id:t._id}),o.success("Imported",`Workflow "${t.name}" added to your library`),n({to:"/app/workflows"}))}catch(r){o.error("Import failed",String(r))}finally{d(!1)}},c=t.workflowSteps?.length,s=t.templateBlocks?.length;return e.jsxs("div",{className:"rounded-lg border border-border bg-card p-4 space-y-3 hover:shadow-sm transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${t.type==="template"?"bg-blue-500/10 text-blue-600 dark:text-blue-400":"bg-purple-500/10 text-purple-600 dark:text-purple-400"}`,children:t.type==="template"?"Template":"Workflow"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.category})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:t.description})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",t.authorName," · ",t.importCount," ",t.importCount===1?"import":"imports",c?` · ${c} steps`:"",s?` · ${s} blocks`:""]}),e.jsxs(k,{size:"sm",variant:"outline",onClick:p,disabled:l,className:"text-xs h-7",children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),l?"...":"Import"]})]})]})}export{_ as component};
