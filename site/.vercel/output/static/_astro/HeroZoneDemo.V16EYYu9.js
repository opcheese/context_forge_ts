import{i as D,f as k,b as S,J as I,u as j,M as w,c as z,d as M,e as R,g as p,j as c,m as A,s as V}from"./motion.BC_eRrgd.js";import{r as l}from"./index.DiEladB3.js";function F(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],o=e[1+n],s=e[2+n],a=e[3+n],i=D(o,s,a);return t?i(r):i}function L(e,t,n={}){const r=e.get();let o=null,s=r,a;const i=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,u=()=>{o&&(o.stop(),o=null)},g=()=>{u();const d=y(e.get()),m=y(s);d!==m&&(o=new I({keyframes:[d,m],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:a}))};if(e.attach((d,m)=>{s=d,a=f=>m(x(f,i)),k.postRender(()=>{g(),e.events.animationStart?.notify(),o?.then(()=>{e.events.animationComplete?.notify()})})},u),S(t)){const d=t.on("change",f=>e.set(x(f,i))),m=e.on("destroy",d);return()=>{d(),m()}}return u}function x(e,t){return t?e+t:e}function y(e){return typeof e=="number"?e:parseFloat(e)}function C(e){const t=j(()=>z(e)),{isStatic:n}=l.useContext(w);if(n){const[,r]=l.useState(e);l.useEffect(()=>t.on("change",r),[])}return t}function N(e,t){const n=C(t()),r=()=>n.set(t());return r(),M(()=>{const o=()=>k.preRender(r,!1,!0),s=e.map(a=>a.on("change",o));return()=>{s.forEach(a=>a()),R(r)}}),n}function B(e){p.current=[],e();const t=N(p.current,e);return p.current=void 0,t}function v(e,t,n,r){if(typeof e=="function")return B(e);const s=typeof t=="function"?t:F(t,n,r),a=Array.isArray(e)?h(e,s):h([e],([u])=>s(u)),i=Array.isArray(e)?void 0:e.accelerate;return i&&!i.isTransformed&&typeof t!="function"&&Array.isArray(n)&&r?.clamp!==!1&&(a.accelerate={...i,times:t,keyframes:n,isTransformed:!0}),a}function h(e,t){const n=j(()=>[]);return N(e,()=>{n.length=0;const r=e.length;for(let o=0;o<r;o++)n[o]=e[o].get();return t(n)})}function J(e,t={}){const{isStatic:n}=l.useContext(w),r=()=>S(e)?e.get():e;if(n)return v(r);const o=C(r());return l.useInsertionEffect(()=>L(o,e,t),[o,JSON.stringify(t)]),o}function T(e,t={}){return J(e,{type:"spring",...t})}function Z({value:e,className:t,format:n}){const r=T(e,V.gentle);l.useEffect(()=>{r.set(e)},[r,e]);const o=v(r,s=>n?n(s):Math.round(s).toString());return c.jsx(A.span,{className:t,children:o})}const H=[{id:"b1",label:"System role",tokens:120,zone:"permanent"},{id:"b2",label:"Project brief",tokens:340,zone:"stable"},{id:"b3",label:"Style guide",tokens:210,zone:"stable"},{id:"b4",label:"Current draft",tokens:185,zone:"working"}],O=[{key:"permanent",label:"Permanent",color:"border-blue-500/30 bg-blue-500/5 dark:bg-blue-400/5"},{key:"stable",label:"Stable",color:"border-emerald-500/30 bg-emerald-500/5 dark:bg-emerald-400/5"},{key:"working",label:"Working",color:"border-amber-500/30 bg-amber-500/5 dark:bg-amber-400/5"}];function _(){const[e,t]=l.useState(H),n={permanent:l.useRef(null),stable:l.useRef(null),working:l.useRef(null)},r=l.useCallback(s=>e.filter(a=>a.zone===s).reduce((a,i)=>a+i.tokens,0),[e]),o=l.useCallback((s,a,i)=>{const{x:u,y:g}=i.point;for(const[d,m]of Object.entries(n)){const f=m.current?.getBoundingClientRect();if(f&&u>=f.left&&u<=f.right&&g>=f.top&&g<=f.bottom){t(E=>E.map(b=>b.id===s?{...b,zone:d}:b));return}}},[]);return c.jsxs("div",{children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:O.map(s=>c.jsxs("div",{ref:n[s.key],className:`rounded-xl border-2 border-dashed p-4 sm:p-5 ${s.color} transition-colors min-h-[120px]`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:s.label}),c.jsxs("div",{className:"text-xs text-muted-foreground/60 tabular-nums",children:[c.jsx(Z,{value:r(s.key)})," tok"]})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:e.filter(a=>a.zone===s.key).map(a=>c.jsxs(A.div,{drag:!0,dragSnapToOrigin:!0,dragMomentum:!1,onDragEnd:(i,u)=>o(a.id,i,u),whileDrag:{scale:1.08,zIndex:50,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},whileHover:{scale:1.04,y:-1},transition:V.snappy,className:"cursor-grab active:cursor-grabbing select-none px-3 py-1.5 rounded-lg text-sm font-medium bg-foreground/[0.07] dark:bg-foreground/[0.1] border border-border/50 hover:border-border hover:shadow-sm",children:[c.jsx("span",{className:"mr-1.5 text-muted-foreground/40",children:"â ¿"}),a.label]},a.id))})]},s.key))}),c.jsx("p",{className:"text-xs text-muted-foreground/40 mt-3 text-center",children:"Drag blocks between zones to see how context is organized"})]})}export{_ as HeroZoneDemo};
